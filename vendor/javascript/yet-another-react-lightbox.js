import*as e from"react";import{createPortal as t}from"react-dom";const n="carousel";const o="controller";const r="navigation";const s="no-scroll";const c="portal";const i="root";const l="toolbar";const a="captions";const u="counter";const d="download";const f="fullscreen";const v="inline";const p="share";const h="slideshow";const m="thumbnails";const g="zoom";const b="loading";const E="playing";const x="error";const P="complete";const w="placeholder";const activeSlideStatus=e=>`active-slide-${e}`;const N=activeSlideStatus(b);const y=activeSlideStatus(E);const C=activeSlideStatus(x);const S=activeSlideStatus(P);const k="fullsize";const L="flex_center";const M="no_scroll";const I="no_scroll_padding";const R="slide_wrapper";const T="prev";const $="next";const D="swipe";const _="close";const W="onPointerDown";const A="onPointerMove";const O="onPointerUp";const F="onPointerLeave";const B="onPointerCancel";const z="onKeyDown";const U="onKeyUp";const H="onWheel";const X="Escape";const K="ArrowLeft";const V="ArrowRight";const Y="button";const j="icon";const q="contain";const G="cover";const J="Unknown action type";"use client";const clsx=(...e)=>[...e].filter((e=>Boolean(e))).join(" ");const Q="yarl__";const cssClass=e=>`${Q}${e}`;const cssVar=e=>`--${Q}${e}`;const composePrefix=(e,t)=>`${e}${t?`_${t}`:""}`;const makeComposePrefix=e=>t=>composePrefix(e,t);const label=(e,t)=>e&&e[t]?e[t]:t;const cleanup=(...e)=>()=>{e.forEach((e=>{e()}))};const makeUseContext=(t,n,o)=>()=>{const r=e.useContext(o);if(!r)throw new Error(`${t} must be used within a ${n}.Provider`);return r};const hasWindow=()=>typeof window!=="undefined";function round(e,t=0){const n=10**t;return Math.round((e+Number.EPSILON)*n)/n}const isImageSlide=e=>e.type===void 0||e.type==="image";const isImageFitCover=(e,t)=>e.imageFit===G||e.imageFit!==q&&t===G;function parseInt(e){return typeof e==="string"?Number.parseInt(e,10):e}function parseLengthPercentage(e){if(typeof e==="number")return{pixel:e};if(typeof e==="string"){const t=parseInt(e);return e.endsWith("%")?{percent:t}:{pixel:t}}return{pixel:0}}function computeSlideRect(e,t){const n=parseLengthPercentage(t);const o=n.percent!==void 0?e.width/100*n.percent:n.pixel;return{width:Math.max(e.width-2*o,0),height:Math.max(e.height-2*o,0)}}const devicePixelRatio=()=>(hasWindow()?window===null||window===void 0?void 0:window.devicePixelRatio:void 0)||1;const getSlideIndex=(e,t)=>t>0?(e%t+t)%t:0;const hasSlides=e=>e.length>0;const getSlide=(e,t)=>e[getSlideIndex(t,e.length)];const getSlideIfPresent=(e,t)=>hasSlides(e)?getSlide(e,t):void 0;function addToolbarButton(t,n,o){if(!o)return t;const{buttons:r,...s}=t;const c=r.findIndex((e=>e===n));const i=e.isValidElement(o)?e.cloneElement(o,{key:n},null):o;if(c>=0){const e=[...r];e.splice(c,1,i);return{buttons:e,...s}}return{buttons:[i,...r],...s}}function stopNavigationEventsPropagation(){const stopPropagation=e=>{e.stopPropagation()};return{onPointerDown:stopPropagation,onKeyDown:stopPropagation,onWheel:stopPropagation}}function calculatePreload(e,t,n=0){return Math.min(e.preload,Math.max(e.finite?t.length-1:Math.floor(t.length/2),n))}const Z={open:false,close:()=>{},index:0,slides:[],render:{},plugins:[],toolbar:{buttons:[_]},labels:{},animation:{fade:250,swipe:500,easing:{fade:"ease",swipe:"ease-out",navigation:"ease-in-out"}},carousel:{finite:false,preload:2,padding:"16px",spacing:"30%",imageFit:q,imageProps:{}},controller:{ref:null,focus:true,aria:false,touchAction:"none",closeOnPullDown:false,closeOnBackdropClick:false},portal:{},noScroll:{disabled:false},on:{},styles:{},className:""};function createModule(e,t){return{name:e,component:t}}function createNode(e,t){return{module:e,children:t}}function traverseNode(e,t,n){return e.module.name===t?n(e):e.children?[createNode(e.module,e.children.flatMap((e=>{var o;return(o=traverseNode(e,t,n))!==null&&o!==void 0?o:[]})))]:[e]}function traverse(e,t,n){return e.flatMap((e=>{var o;return(o=traverseNode(e,t,n))!==null&&o!==void 0?o:[]}))}function withPlugins(e,t=[],n=[]){let r=e;const contains=e=>{const t=[...r];while(t.length>0){const n=t.pop();if((n===null||n===void 0?void 0:n.module.name)===e)return true;(n===null||n===void 0?void 0:n.children)&&t.push(...n.children)}return false};const addParent=(e,t)=>{r=e!==""?traverse(r,e,(e=>[createNode(t,[e])])):[createNode(t,r)]};const append=(e,t)=>{r=traverse(r,e,(e=>[createNode(e.module,[createNode(t,e.children)])]))};const addChild=(e,t,n)=>{r=traverse(r,e,(e=>{var o;return[createNode(e.module,[...n?[createNode(t)]:[],...(o=e.children)!==null&&o!==void 0?o:[],...n?[]:[createNode(t)]])]}))};const addSibling=(e,t,n)=>{r=traverse(r,e,(e=>[...n?[createNode(t)]:[],e,...n?[]:[createNode(t)]]))};const addModule=e=>{append(o,e)};const replace=(e,t)=>{r=traverse(r,e,(e=>[createNode(t,e.children)]))};const remove=e=>{r=traverse(r,e,(e=>e.children))};const augment=e=>{n.push(e)};t.forEach((e=>{e({contains:contains,addParent:addParent,append:append,addChild:addChild,addSibling:addSibling,addModule:addModule,replace:replace,remove:remove,augment:augment})}));return{config:r,augmentation:e=>n.reduce(((e,t)=>t(e)),e)}}const ee=e.createContext(null);const te=makeUseContext("useEvents","EventsContext",ee);function EventsProvider({children:t}){const[n]=e.useState({});e.useEffect((()=>()=>{Object.keys(n).forEach((e=>delete n[e]))}),[n]);const o=e.useMemo((()=>{const unsubscribe=(e,t)=>{var o;(o=n[e])===null||o===void 0?void 0:o.splice(0,n[e].length,...n[e].filter((e=>e!==t)))};const subscribe=(e,t)=>{n[e]||(n[e]=[]);n[e].push(t);return()=>unsubscribe(e,t)};const publish=(...[e,t])=>{var o;(o=n[e])===null||o===void 0?void 0:o.forEach((e=>e(t)))};return{publish:publish,subscribe:subscribe,unsubscribe:unsubscribe}}),[n]);return e.createElement(ee.Provider,{value:o},t)}const ne=e.createContext(null);const oe=makeUseContext("useLightboxProps","LightboxPropsContext",ne);function LightboxPropsProvider({children:t,...n}){return e.createElement(ne.Provider,{value:n},t)}const re=e.createContext(null);const se=makeUseContext("useLightboxState","LightboxStateContext",re);const ce=e.createContext(null);const ie=makeUseContext("useLightboxDispatch","LightboxDispatchContext",ce);function reducer(e,t){switch(t.type){case"swipe":{const{slides:n}=e;const o=(t===null||t===void 0?void 0:t.increment)||0;const r=e.globalIndex+o;const s=getSlideIndex(r,n.length);const c=getSlideIfPresent(n,s);const i=o||t.duration?{increment:o,duration:t.duration,easing:t.easing}:void 0;return{slides:n,currentIndex:s,globalIndex:r,currentSlide:c,animation:i}}case"update":return t.slides!==e.slides||t.index!==e.currentIndex?{slides:t.slides,currentIndex:t.index,globalIndex:t.index,currentSlide:getSlideIfPresent(t.slides,t.index)}:e;default:throw new Error(J)}}function LightboxStateProvider({slides:t,index:n,children:o}){const[r,s]=e.useReducer(reducer,{slides:t,currentIndex:n,globalIndex:n,currentSlide:getSlideIfPresent(t,n)});e.useEffect((()=>{s({type:"update",slides:t,index:n})}),[t,n]);const c=e.useMemo((()=>({...r,state:r,dispatch:s})),[r,s]);return e.createElement(ce.Provider,{value:s},e.createElement(re.Provider,{value:c},o))}const le=e.createContext(null);const ae=makeUseContext("useTimeouts","TimeoutsContext",le);function TimeoutsProvider({children:t}){const[n]=e.useState([]);e.useEffect((()=>()=>{n.forEach((e=>window.clearTimeout(e)));n.splice(0,n.length)}),[n]);const o=e.useMemo((()=>{const removeTimeout=e=>{n.splice(0,n.length,...n.filter((t=>t!==e)))};const setTimeout=(e,t)=>{const o=window.setTimeout((()=>{removeTimeout(o);e()}),t);n.push(o);return o};const clearTimeout=e=>{if(e!==void 0){removeTimeout(e);window.clearTimeout(e)}};return{setTimeout:setTimeout,clearTimeout:clearTimeout}}),[n]);return e.createElement(le.Provider,{value:o},t)}const ue=e.forwardRef((function IconButton({label:t,className:n,icon:o,renderIcon:r,onClick:s,style:c,...i},l){const{styles:a,labels:u}=oe();return e.createElement("button",{ref:l,type:"button","aria-label":label(u,t),className:clsx(cssClass(Y),n),onClick:s,style:{...c,...a.button},...i},r?r():e.createElement(o,{className:cssClass(j),style:a.icon}))}));function svgIcon(t,n){const icon=t=>e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false",...t},n);icon.displayName=t;return icon}function createIcon(t,n){return svgIcon(t,e.createElement("g",{fill:"currentColor"},e.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n))}function createIconDisabled(t,n){return svgIcon(t,e.createElement(e.Fragment,null,e.createElement("defs",null,e.createElement("mask",{id:"strike"},e.createElement("path",{d:"M0 0h24v24H0z",fill:"white"}),e.createElement("path",{d:"M0 0L24 24",stroke:"black",strokeWidth:4}))),e.createElement("path",{d:"M0.70707 2.121320L21.878680 23.292883",stroke:"currentColor",strokeWidth:2}),e.createElement("g",{fill:"currentColor",mask:"url(#strike)"},e.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),n)))}const de=createIcon("Close",e.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}));const fe=createIcon("Previous",e.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}));const ve=createIcon("Next",e.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}));const pe=createIcon("Loading",e.createElement(e.Fragment,null,Array.from({length:8}).map(((t,n,o)=>e.createElement("line",{key:n,x1:"12",y1:"6.5",x2:"12",y2:"1.8",strokeLinecap:"round",strokeWidth:"2.6",stroke:"currentColor",strokeOpacity:1/o.length*(n+1),transform:`rotate(${360/o.length*n}, 12, 12)`})))));const he=createIcon("Error",e.createElement("path",{d:"M21.9,21.9l-8.49-8.49l0,0L3.59,3.59l0,0L2.1,2.1L0.69,3.51L3,5.83V19c0,1.1,0.9,2,2,2h13.17l2.31,2.31L21.9,21.9z M5,18 l3.5-4.5l2.5,3.01L12.17,15l3,3H5z M21,18.17L5.83,3H19c1.1,0,2,0.9,2,2V18.17z"}));const me=hasWindow()?e.useLayoutEffect:e.useEffect;function useMotionPreference(){const[t,n]=e.useState(false);e.useEffect((()=>{var e,t;const o=(e=window.matchMedia)===null||e===void 0?void 0:e.call(window,"(prefers-reduced-motion: reduce)");n(o===null||o===void 0?void 0:o.matches);const listener=e=>n(e.matches);(t=o===null||o===void 0?void 0:o.addEventListener)===null||t===void 0?void 0:t.call(o,"change",listener);return()=>{var e;return(e=o===null||o===void 0?void 0:o.removeEventListener)===null||e===void 0?void 0:e.call(o,"change",listener)}}),[]);return t}function currentTransformation(e){let t=0;let n=0;let o=0;const r=window.getComputedStyle(e).transform;const s=r.match(/matrix.*\((.+)\)/);if(s){const e=s[1].split(",").map(parseInt);if(e.length===6){t=e[4];n=e[5]}else if(e.length===16){t=e[12];n=e[13];o=e[14]}}return{x:t,y:n,z:o}}function useAnimation(t,n){const o=e.useRef();const r=e.useRef();const s=useMotionPreference();me((()=>{var e,c,i;if(t.current&&o.current!==void 0&&!s){const{keyframes:s,duration:l,easing:a,onfinish:u}=n(o.current,t.current.getBoundingClientRect(),currentTransformation(t.current))||{};if(s&&l){(e=r.current)===null||e===void 0?void 0:e.cancel();r.current=void 0;try{r.current=(i=(c=t.current).animate)===null||i===void 0?void 0:i.call(c,s,{duration:l,easing:a})}catch(e){console.error(e)}r.current&&(r.current.onfinish=()=>{r.current=void 0;u===null||u===void 0?void 0:u()})}}o.current=void 0}));return{prepareAnimation:e=>{o.current=e},isAnimationPlaying:()=>{var e;return((e=r.current)===null||e===void 0?void 0:e.playState)==="running"}}}function useContainerRect(){const t=e.useRef(null);const n=e.useRef();const[o,r]=e.useState();const s=e.useCallback((e=>{t.current=e;if(n.current){n.current.disconnect();n.current=void 0}const updateContainerRect=()=>{if(e){const t=window.getComputedStyle(e);const parse=e=>parseFloat(e)||0;r({width:Math.round(e.clientWidth-parse(t.paddingLeft)-parse(t.paddingRight)),height:Math.round(e.clientHeight-parse(t.paddingTop)-parse(t.paddingBottom))})}else r(void 0)};updateContainerRect();if(e&&typeof ResizeObserver!=="undefined"){n.current=new ResizeObserver(updateContainerRect);n.current.observe(e)}}),[]);return{setContainerRef:s,containerRef:t,containerRect:o}}function useDelay(){const t=e.useRef();const{setTimeout:n,clearTimeout:o}=ae();return e.useCallback(((e,r)=>{o(t.current);t.current=n(e,r>0?r:0)}),[n,o])}function useEventCallback(t){const n=e.useRef(t);me((()=>{n.current=t}));return e.useCallback(((...e)=>{var t;return(t=n.current)===null||t===void 0?void 0:t.call(n,...e)}),[])}function setRef(e,t){typeof e==="function"?e(t):e&&(e.current=t)}function useForkRef(t,n){return e.useMemo((()=>t==null&&n==null?null:e=>{setRef(t,e);setRef(n,e)}),[t,n])}function useLoseFocus(t,n=false){const o=e.useRef();me((()=>{if(n&&o.current){o.current=false;t()}}),[n,t]);const r=e.useCallback((()=>{o.current=true}),[]);const s=e.useCallback((()=>{o.current=false}),[]);return{onFocus:r,onBlur:s}}function useRTL(){const[t,n]=e.useState(false);me((()=>{n(window.getComputedStyle(window.document.documentElement).direction==="rtl")}),[]);return t}function useSensors(){const[t]=e.useState({});const n=e.useCallback(((e,n)=>{var o;(o=t[e])===null||o===void 0?void 0:o.forEach((e=>{n.isPropagationStopped()||e(n)}))}),[t]);const o=e.useMemo((()=>({onPointerDown:e=>n(W,e),onPointerMove:e=>n(A,e),onPointerUp:e=>n(O,e),onPointerLeave:e=>n(F,e),onPointerCancel:e=>n(B,e),onKeyDown:e=>n(z,e),onKeyUp:e=>n(U,e),onWheel:e=>n(H,e)})),[n]);const r=e.useCallback(((e,n)=>{t[e]||(t[e]=[]);t[e].unshift(n);return()=>{const o=t[e];o&&o.splice(0,o.length,...o.filter((e=>e!==n)))}}),[t]);return{registerSensors:o,subscribeSensors:r}}function useThrottle(t,n){const o=e.useRef(0);const r=useDelay();const s=useEventCallback(((...e)=>{o.current=Date.now();t(e)}));return e.useCallback(((...e)=>{r((()=>{s(e)}),n-(Date.now()-o.current))}),[n,s,r])}const ge=makeComposePrefix("slide");const be=makeComposePrefix("slide_image");function ImageSlide({slide:t,offset:n,render:o,rect:r,imageFit:s,imageProps:c,onClick:i,onLoad:l,style:a}){var u,d,f,v,p,h,m;const[g,E]=e.useState(b);const{publish:N}=te();const{setTimeout:y}=ae();const C=e.useRef(null);e.useEffect((()=>{n===0&&N(activeSlideStatus(g))}),[n,g,N]);const S=useEventCallback((e=>{("decode"in e?e.decode():Promise.resolve()).catch((()=>{})).then((()=>{if(e.parentNode){E(P);y((()=>{l===null||l===void 0?void 0:l(e)}),0)}}))}));const k=e.useCallback((e=>{C.current=e;(e===null||e===void 0?void 0:e.complete)&&S(e)}),[S]);const L=e.useCallback((e=>{S(e.currentTarget)}),[S]);const M=e.useCallback((()=>{E(x)}),[]);const I=isImageFitCover(t,s);const nonInfinite=(e,t)=>Number.isFinite(e)?e:t;const R=nonInfinite(Math.max(...((d=(u=t.srcSet)===null||u===void 0?void 0:u.map((e=>e.width)))!==null&&d!==void 0?d:[]).concat(t.width?[t.width]:[]).filter(Boolean)),((f=C.current)===null||f===void 0?void 0:f.naturalWidth)||0);const T=nonInfinite(Math.max(...((p=(v=t.srcSet)===null||v===void 0?void 0:v.map((e=>e.height)))!==null&&p!==void 0?p:[]).concat(t.height?[t.height]:[]).filter(Boolean)),((h=C.current)===null||h===void 0?void 0:h.naturalHeight)||0);const $=R&&T?{maxWidth:`min(${R}px, 100%)`,maxHeight:`min(${T}px, 100%)`}:{maxWidth:"100%",maxHeight:"100%"};const D=(m=t.srcSet)===null||m===void 0?void 0:m.sort(((e,t)=>e.width-t.width)).map((e=>`${e.src} ${e.width}w`)).join(", ");const estimateActualWidth=()=>r&&!I&&t.width&&t.height?r.height/t.height*t.width:Number.MAX_VALUE;const _=D&&r&&hasWindow()?`${Math.round(Math.min(estimateActualWidth(),r.width))}px`:void 0;const{style:W,className:A,...O}=c||{};return e.createElement(e.Fragment,null,e.createElement("img",{ref:k,onLoad:L,onError:M,onClick:i,draggable:false,className:clsx(cssClass(be()),I&&cssClass(be("cover")),g!==P&&cssClass(be("loading")),A),style:{...$,...a,...W},...O,alt:t.alt,sizes:_,srcSet:D,src:t.src}),g!==P&&e.createElement("div",{className:cssClass(ge(w))},g===b&&((o===null||o===void 0?void 0:o.iconLoading)?o.iconLoading():e.createElement(pe,{className:clsx(cssClass(j),cssClass(ge(b)))})),g===x&&((o===null||o===void 0?void 0:o.iconError)?o.iconError():e.createElement(he,{className:clsx(cssClass(j),cssClass(ge(x)))}))))}var Ee;(function(e){e[e.NONE=0]="NONE";e[e.SWIPE=1]="SWIPE";e[e.PULL_DOWN=2]="PULL_DOWN";e[e.ANIMATION=3]="ANIMATION"})(Ee||(Ee={}));function usePointerEvents(t,n,o,r,s){e.useEffect((()=>s?()=>{}:cleanup(t(W,n),t(A,o),t(O,r),t(F,r),t(B,r))),[t,n,o,r,s])}var xe;(function(e){e[e.NONE=0]="NONE";e[e.SWIPE=1]="SWIPE";e[e.PULL_DOWN=2]="PULL_DOWN"})(xe||(xe={}));const Pe=30;function usePointerSwipe(t,n,o,r,s,c,i,l,a,u,d,f,v){const p=e.useRef(0);const h=e.useRef([]);const m=e.useRef();const g=e.useRef(0);const b=e.useRef(xe.NONE);const E=e.useCallback((e=>{if(m.current===e.pointerId){m.current=void 0;b.current=xe.NONE}const t=h.current;t.splice(0,t.length,...t.filter((t=>t.pointerId!==e.pointerId)))}),[]);const x=e.useCallback((e=>{E(e);e.persist();h.current.push(e)}),[E]);const P=useEventCallback((e=>{x(e)}));const w=useEventCallback((e=>{if(h.current.find((t=>t.pointerId===e.pointerId))&&m.current===e.pointerId){const e=Date.now()-g.current;const t=p.current;b.current===xe.SWIPE?Math.abs(t)>.3*o||Math.abs(t)>5&&e<r?i(t,e):l(t):b.current===xe.PULL_DOWN&&(t>2*Pe?f(t,e):v(t));p.current=0;b.current=xe.NONE}E(e)}));const N=useEventCallback((e=>{const t=h.current.find((t=>t.pointerId===e.pointerId));if(t){const o=m.current===e.pointerId;if(e.buttons===0){o&&p.current!==0?w(e):E(t);return}const r=e.clientX-t.clientX;const i=e.clientY-t.clientY;if(m.current===void 0){const startGesture=t=>{x(e);m.current=e.pointerId;g.current=Date.now();b.current=t};if(Math.abs(r)>Math.abs(i)&&Math.abs(r)>Pe&&n(r)){startGesture(xe.SWIPE);s()}else if(a&&Math.abs(i)>Math.abs(r)&&i>Pe){startGesture(xe.PULL_DOWN);u()}}else if(o)if(b.current===xe.SWIPE){p.current=r;c(r)}else if(b.current===xe.PULL_DOWN){p.current=i;d(i)}}}));usePointerEvents(t,P,N,w)}const we="wheel";function preventDefault(e){(Math.abs(e.deltaX)>Math.abs(e.deltaY)||e.ctrlKey)&&e.preventDefault()}function usePreventSwipeNavigation(){const t=e.useRef(null);return e.useCallback((e=>{var n;e?e.addEventListener(we,preventDefault,{passive:false}):(n=t.current)===null||n===void 0?void 0:n.removeEventListener(we,preventDefault);t.current=e}),[])}function useWheelSwipe(t,n,o,r,s,c,i,l,a){const u=e.useRef(0);const d=e.useRef(0);const f=e.useRef();const v=e.useRef();const p=e.useRef(0);const h=e.useRef(0);const{setTimeout:m,clearTimeout:g}=ae();const b=e.useCallback((()=>{if(f.current){g(f.current);f.current=void 0}}),[g]);const E=e.useCallback((()=>{if(v.current){g(v.current);v.current=void 0}}),[g]);const x=useEventCallback((()=>{if(t!==Ee.SWIPE){u.current=0;h.current=0;b();E()}}));e.useEffect(x,[t,x]);const P=useEventCallback((e=>{v.current=void 0;u.current===e&&a(u.current)}));const w=useEventCallback((e=>{if(!e.ctrlKey&&!(Math.abs(e.deltaY)>Math.abs(e.deltaX)))if(t===Ee.NONE){if(Math.abs(e.deltaX)<=1.2*Math.abs(p.current)){p.current=e.deltaX;return}if(!o(-e.deltaX))return;d.current+=e.deltaX;b();if(Math.abs(d.current)>30){d.current=0;p.current=0;h.current=Date.now();c()}else{const e=d.current;f.current=m((()=>{f.current=void 0;e===d.current&&(d.current=0)}),s)}}else if(t===Ee.SWIPE){let t=u.current-e.deltaX;t=Math.min(Math.abs(t),r)*Math.sign(t);u.current=t;i(t);E();if(Math.abs(t)>.2*r){p.current=e.deltaX;l(t,Date.now()-h.current);return}v.current=m((()=>P(t)),2*s)}else p.current=e.deltaX}));e.useEffect((()=>n(H,w)),[n,w])}const Ne=makeComposePrefix("container");const ye=e.createContext(null);const Ce=makeUseContext("useController","ControllerContext",ye);function Controller({children:t,...n}){var o;const{carousel:r,animation:s,controller:i,on:l,styles:a,render:u}=n;const[d,f]=e.useState();const v=se();const p=ie();const[h,m]=e.useState(Ee.NONE);const g=e.useRef(0);const b=e.useRef(0);const E=e.useRef(1);const{registerSensors:x,subscribeSensors:P}=useSensors();const{subscribe:w,publish:N}=te();const y=useDelay();const C=useDelay();const S=useDelay();const{containerRef:k,setContainerRef:M,containerRect:I}=useContainerRect();const R=useForkRef(usePreventSwipeNavigation(),M);const W=e.useRef(null);const A=useForkRef(W,void 0);const O=useRTL();const rtl=e=>(O?-1:1)*(typeof e==="number"?e:1);const F=useEventCallback((()=>{var e;return(e=k.current)===null||e===void 0?void 0:e.focus()}));const B=useEventCallback((()=>n));const z=useEventCallback((()=>v));const U=e.useCallback((e=>N(T,e)),[N]);const H=e.useCallback((e=>N($,e)),[N]);const X=e.useCallback((()=>N(_)),[N]);const isSwipeValid=e=>!(r.finite&&(rtl(e)>0&&v.currentIndex===0||rtl(e)<0&&v.currentIndex===v.slides.length-1));const setSwipeOffset=e=>{var t;g.current=e;(t=k.current)===null||t===void 0?void 0:t.style.setProperty(cssVar("swipe_offset"),`${Math.round(e)}px`)};const{closeOnPullDown:K}=i;const setPullDownOffset=e=>{var t,n;b.current=e;E.current=(()=>{const t=60;const n=.5;return Math.min(Math.max(round(1-e/t*(1-n),2),n),1)})();(t=k.current)===null||t===void 0?void 0:t.style.setProperty(cssVar("pull_down_offset"),`${Math.round(e)}px`);(n=k.current)===null||n===void 0?void 0:n.style.setProperty(cssVar("pull_down_opacity"),`${E.current}`)};const{prepareAnimation:V}=useAnimation(W,((e,t,n)=>{if(W.current&&I)return{keyframes:[{transform:`translate(0, ${e.rect.y-t.y+n.y}px)`,opacity:e.opacity},{transform:"translate(0, 0)",opacity:1}],duration:e.duration,easing:s.easing.fade}}));const pullDown=(e,t)=>{if(K){setPullDownOffset(e);let n=0;if(W.current){n=s.fade*(t?2:1);V({rect:W.current.getBoundingClientRect(),opacity:E.current,duration:n})}S((()=>{setPullDownOffset(0);m(Ee.NONE)}),n);m(Ee.ANIMATION);t||X()}};const{prepareAnimation:Y,isAnimationPlaying:j}=useAnimation(W,((e,t,n)=>{var o;if(W.current&&I&&((o=v.animation)===null||o===void 0?void 0:o.duration)){const o=parseLengthPercentage(r.spacing);const s=(o.percent?o.percent*I.width/100:o.pixel)||0;return{keyframes:[{transform:`translate(${rtl(v.globalIndex-e.index)*(I.width+s)+e.rect.x-t.x+n.x}px, 0)`},{transform:"translate(0, 0)"}],duration:v.animation.duration,easing:v.animation.easing}}}));const q=useEventCallback((e=>{var t,n;const o=e.offset||0;const r=o?s.swipe:(t=s.navigation)!==null&&t!==void 0?t:s.swipe;const c=o||j()?s.easing.swipe:s.easing.navigation;let{direction:i}=e;const l=(n=e.count)!==null&&n!==void 0?n:1;let a=Ee.ANIMATION;let u=r*l;if(!i){const t=I===null||I===void 0?void 0:I.width;const n=e.duration||0;const s=t?r/t*Math.abs(o):r;if(l!==0){n<s?u=u/s*Math.max(n,s/5):t&&(u=r/t*(t-Math.abs(o)));i=rtl(o)>0?T:$}else u=r/2}let d=0;if(i===T)if(isSwipeValid(rtl(1)))d=-l;else{a=Ee.NONE;u=r}else if(i===$)if(isSwipeValid(rtl(-1)))d=l;else{a=Ee.NONE;u=r}u=Math.round(u);C((()=>{setSwipeOffset(0);m(Ee.NONE)}),u);W.current&&Y({rect:W.current.getBoundingClientRect(),index:v.globalIndex});m(a);N(D,{type:"swipe",increment:d,duration:u,easing:c})}));e.useEffect((()=>{var e,t;((e=v.animation)===null||e===void 0?void 0:e.increment)&&((t=v.animation)===null||t===void 0?void 0:t.duration)&&y((()=>p({type:"swipe",increment:0})),v.animation.duration)}),[v.animation,p,y]);const G=[P,isSwipeValid,(I===null||I===void 0?void 0:I.width)||0,s.swipe,()=>m(Ee.SWIPE),e=>setSwipeOffset(e),(e,t)=>q({offset:e,duration:t,count:1}),e=>q({offset:e,count:0})];const J=[()=>{K&&m(Ee.PULL_DOWN)},e=>setPullDownOffset(e),e=>pullDown(e),e=>pullDown(e,true)];usePointerSwipe(...G,K,...J);useWheelSwipe(h,...G);const Q=useEventCallback((()=>{i.focus&&document.querySelector(`.${cssClass(c)} .${cssClass(Ne())}`)&&F()}));e.useEffect(Q,[Q]);const Z=useEventCallback((()=>{var e;(e=l.view)===null||e===void 0?void 0:e.call(l,{index:v.currentIndex})}));e.useEffect(Z,[v.globalIndex,Z]);e.useEffect((()=>cleanup(w(T,(e=>q({direction:T,...e}))),w($,(e=>q({direction:$,...e}))),w(D,(e=>p(e))))),[w,q,p]);const ee=e.useMemo((()=>({prev:U,next:H,close:X,focus:F,slideRect:I?computeSlideRect(I,r.padding):{width:0,height:0},containerRect:I||{width:0,height:0},subscribeSensors:P,containerRef:k,setCarouselRef:A,toolbarWidth:d,setToolbarWidth:f})),[U,H,X,F,P,I,k,A,d,f,r.padding]);e.useImperativeHandle(i.ref,(()=>({prev:U,next:H,close:X,focus:F,getLightboxProps:B,getLightboxState:z})),[U,H,X,F,B,z]);return e.createElement("div",{ref:R,className:clsx(cssClass(Ne()),cssClass(L)),style:{...h===Ee.SWIPE?{[cssVar("swipe_offset")]:`${Math.round(g.current)}px`}:null,...h===Ee.PULL_DOWN?{[cssVar("pull_down_offset")]:`${Math.round(b.current)}px`,[cssVar("pull_down_opacity")]:`${E.current}`}:null,...i.touchAction!=="none"?{[cssVar("controller_touch_action")]:i.touchAction}:null,...a.container},...i.aria?{role:"presentation","aria-live":"polite"}:null,tabIndex:-1,...x},I&&e.createElement(ye.Provider,{value:ee},t,(o=u.controls)===null||o===void 0?void 0:o.call(u)))}const Se=createModule(o,Controller);function cssPrefix$2(e){return composePrefix(n,e)}function cssSlidePrefix(e){return composePrefix("slide",e)}function CarouselSlide({slide:t,offset:n}){const o=e.useRef(null);const{currentIndex:r}=se();const{slideRect:s,close:c}=Ce();const{render:i,carousel:{imageFit:l,imageProps:a},on:{click:u},controller:{closeOnBackdropClick:d},styles:{slide:f}}=oe();const renderSlide=()=>{var o,c,d,f;let v=(o=i.slide)===null||o===void 0?void 0:o.call(i,{slide:t,offset:n,rect:s});!v&&isImageSlide(t)&&(v=e.createElement(ImageSlide,{slide:t,offset:n,render:i,rect:s,imageFit:l,imageProps:a,onClick:n===0?()=>u===null||u===void 0?void 0:u({index:r}):void 0}));return v?e.createElement(e.Fragment,null,(c=i.slideHeader)===null||c===void 0?void 0:c.call(i,{slide:t}),((d=i.slideContainer)!==null&&d!==void 0?d:({children:e})=>e)({slide:t,children:v}),(f=i.slideFooter)===null||f===void 0?void 0:f.call(i,{slide:t})):null};const handleBackdropClick=e=>{const t=o.current;const n=e.target instanceof HTMLElement?e.target:void 0;d&&n&&t&&(n===t||Array.from(t.children).find((e=>e===n))&&n.classList.contains(cssClass(R)))&&c()};return e.createElement("div",{ref:o,className:clsx(cssClass(cssSlidePrefix()),n===0&&cssClass(cssSlidePrefix("current")),cssClass(L)),onClick:handleBackdropClick,style:f},renderSlide())}function Placeholder(){const t=oe().styles.slide;return e.createElement("div",{className:cssClass("slide"),style:t})}function Carousel({carousel:t}){const{slides:n,currentIndex:o,globalIndex:r}=se();const{setCarouselRef:s}=Ce();const c=parseLengthPercentage(t.spacing);const i=parseLengthPercentage(t.padding);const l=[];const a=calculatePreload(t,n,1);if(hasSlides(n)){for(let s=o-a;s<o;s+=1){const c=r+s-o;l.push(!t.finite||s>=0?e.createElement(CarouselSlide,{key:c,slide:n[(s+a*n.length)%n.length],offset:s-o}):e.createElement(Placeholder,{key:c}))}l.push(e.createElement(CarouselSlide,{key:r,slide:n[o],offset:0}));for(let s=o+1;s<=o+a;s+=1){const c=r+s-o;l.push(!t.finite||s<=n.length-1?e.createElement(CarouselSlide,{key:c,slide:n[s%n.length],offset:s-o}):e.createElement(Placeholder,{key:c}))}}return e.createElement("div",{ref:s,className:clsx(cssClass(cssPrefix$2()),l.length>0&&cssClass(cssPrefix$2("with_slides"))),style:{[`${cssVar(cssPrefix$2("slides_count"))}`]:l.length,[`${cssVar(cssPrefix$2("spacing_px"))}`]:c.pixel||0,[`${cssVar(cssPrefix$2("spacing_percent"))}`]:c.percent||0,[`${cssVar(cssPrefix$2("padding_px"))}`]:i.pixel||0,[`${cssVar(cssPrefix$2("padding_percent"))}`]:i.percent||0}},l)}const ke=createModule(n,Carousel);function useNavigationState(){const{carousel:e}=oe();const{slides:t,currentIndex:n}=se();const o=t.length===0||e.finite&&n===0;const r=t.length===0||e.finite&&n===t.length-1;return{prevDisabled:o,nextDisabled:r}}function useKeyboardNavigation(t){var n;const o=useRTL();const{publish:r}=te();const{animation:s}=oe();const{prevDisabled:c,nextDisabled:i}=useNavigationState();const l=((n=s.navigation)!==null&&n!==void 0?n:s.swipe)/2;const a=useThrottle((()=>r(T)),l);const u=useThrottle((()=>r($)),l);const d=useEventCallback((e=>{switch(e.key){case X:r(_);break;case K:(o?i:c)||(o?u:a)();break;case V:(o?c:i)||(o?a:u)();break;default:}}));e.useEffect((()=>t(z,d)),[t,d])}function NavigationButton({label:t,icon:n,renderIcon:o,action:r,onClick:s,disabled:c,style:i}){return e.createElement(ue,{label:t,icon:n,renderIcon:o,className:cssClass(`navigation_${r}`),disabled:c,onClick:s,style:i,...useLoseFocus(Ce().focus,c)})}function Navigation({render:{buttonPrev:t,buttonNext:n,iconPrev:o,iconNext:r},styles:s}){const{prev:c,next:i,subscribeSensors:l}=Ce();const{prevDisabled:a,nextDisabled:u}=useNavigationState();useKeyboardNavigation(l);return e.createElement(e.Fragment,null,t?t():e.createElement(NavigationButton,{label:"Previous",action:T,icon:fe,renderIcon:o,style:s.navigationPrev,disabled:a,onClick:c}),n?n():e.createElement(NavigationButton,{label:"Next",action:$,icon:ve,renderIcon:r,style:s.navigationNext,disabled:u,onClick:i}))}const Le=createModule(r,Navigation);const Me=cssClass(M);const Ie=cssClass(I);function isHTMLElement(e){return"style"in e}function padScrollbar(e,t,n){const o=window.getComputedStyle(e);const r=n?"padding-left":"padding-right";const s=n?o.paddingLeft:o.paddingRight;const c=e.style.getPropertyValue(r);e.style.setProperty(r,`${(parseInt(s)||0)+t}px`);return()=>{c?e.style.setProperty(r,c):e.style.removeProperty(r)}}function NoScroll({noScroll:{disabled:t},children:n}){const o=useRTL();me((()=>{if(t)return()=>{};const e=[];const{body:n,documentElement:r}=document;const s=Math.round(window.innerWidth-r.clientWidth);if(s>0){e.push(padScrollbar(n,s,o));const t=n.getElementsByTagName("*");for(let n=0;n<t.length;n+=1){const r=t[n];isHTMLElement(r)&&window.getComputedStyle(r).getPropertyValue("position")==="fixed"&&!r.classList.contains(Ie)&&e.push(padScrollbar(r,s,o))}}n.classList.add(Me);return()=>{n.classList.remove(Me);e.forEach((e=>e()))}}),[o,t]);return e.createElement(e.Fragment,null,n)}const Re=createModule(s,NoScroll);function cssPrefix$1(e){return composePrefix(c,e)}function setAttribute(e,t,n){const o=e.getAttribute(t);e.setAttribute(t,n);return()=>{o?e.setAttribute(t,o):e.removeAttribute(t)}}function Portal({children:n,animation:o,styles:r,className:s,on:c,portal:i,close:l}){const[a,u]=e.useState(false);const[d,f]=e.useState(false);const v=e.useRef([]);const p=e.useRef(null);const{setTimeout:h}=ae();const{subscribe:m}=te();const g=useMotionPreference();const b=g?0:o.fade;e.useEffect((()=>{u(true);return()=>{u(false);f(false)}}),[]);const E=useEventCallback((()=>{v.current.forEach((e=>e()));v.current=[]}));const x=useEventCallback((()=>{var e;f(false);E();(e=c.exiting)===null||e===void 0?void 0:e.call(c);h((()=>{var e;(e=c.exited)===null||e===void 0?void 0:e.call(c);l()}),b)}));e.useEffect((()=>m(_,x)),[m,x]);const P=useEventCallback((e=>{var t,n,o;e.scrollTop;f(true);(t=c.entering)===null||t===void 0?void 0:t.call(c);const r=(o=(n=e.parentNode)===null||n===void 0?void 0:n.children)!==null&&o!==void 0?o:[];for(let t=0;t<r.length;t+=1){const n=r[t];if(["TEMPLATE","SCRIPT","STYLE"].indexOf(n.tagName)===-1&&n!==e){v.current.push(setAttribute(n,"inert","true"));v.current.push(setAttribute(n,"aria-hidden","true"))}}v.current.push((()=>{var e,t;(t=(e=p.current)===null||e===void 0?void 0:e.focus)===null||t===void 0?void 0:t.call(e)}));h((()=>{var e;(e=c.entered)===null||e===void 0?void 0:e.call(c)}),b)}));const w=e.useCallback((e=>{e?P(e):E()}),[P,E]);return a?t(e.createElement("div",{ref:w,className:clsx(s,cssClass("root"),cssClass(cssPrefix$1()),cssClass(I),d&&cssClass(cssPrefix$1("open"))),role:"presentation","aria-live":"polite",style:{...o.fade!==Z.animation.fade?{[cssVar("fade_animation_duration")]:`${b}ms`}:null,...o.easing.fade!==Z.animation.easing.fade?{[cssVar("fade_animation_timing_function")]:o.easing.fade}:null,...r.root},onFocus:e=>{p.current||(p.current=e.relatedTarget)}},n),i.root||document.body):null}const Te=createModule(c,Portal);function Root({children:t}){return e.createElement(e.Fragment,null,t)}const $e=createModule(i,Root);function cssPrefix(e){return composePrefix(l,e)}function Toolbar({toolbar:{buttons:t},render:{buttonClose:n,iconClose:o},styles:r}){const{close:s,setToolbarWidth:c}=Ce();const{setContainerRef:i,containerRect:l}=useContainerRect();me((()=>{c(l===null||l===void 0?void 0:l.width)}),[c,l===null||l===void 0?void 0:l.width]);const renderCloseButton=()=>n?n():e.createElement(ue,{key:_,label:"Close",icon:de,renderIcon:o,onClick:s});return e.createElement("div",{ref:i,style:r.toolbar,className:cssClass(cssPrefix())},t===null||t===void 0?void 0:t.map((e=>e===_?renderCloseButton():e)))}const De=createModule(l,Toolbar);function renderNode(t,n){var o;return e.createElement(t.module.component,{key:t.module.name,...n},(o=t.children)===null||o===void 0?void 0:o.map((e=>renderNode(e,n))))}function mergeAnimation(e,t={}){const{easing:n,...o}=e;const{easing:r,...s}=t;return{easing:{...n,...r},...o,...s}}function Lightbox({carousel:t,animation:n,render:o,toolbar:r,controller:s,noScroll:c,on:i,plugins:l,slides:a,index:u,...d}){const{animation:f,carousel:v,render:p,toolbar:h,controller:m,noScroll:g,on:b,slides:E,index:x,plugins:P,...w}=Z;const{config:N,augmentation:y}=withPlugins([createNode(Te,[createNode(Re,[createNode(Se,[createNode(ke),createNode(De),createNode(Le)])])])],l||P);const C=y({animation:mergeAnimation(f,n),carousel:{...v,...t},render:{...p,...o},toolbar:{...h,...r},controller:{...m,...s},noScroll:{...g,...c},on:{...b,...i},...w,...d});return C.open?e.createElement(LightboxPropsProvider,{...C},e.createElement(LightboxStateProvider,{slides:a||E,index:parseInt(u||x)},e.createElement(TimeoutsProvider,null,e.createElement(EventsProvider,null,renderNode(createNode($e,N),C))))):null}export{_ as ACTION_CLOSE,$ as ACTION_NEXT,T as ACTION_PREV,D as ACTION_SWIPE,S as ACTIVE_SLIDE_COMPLETE,C as ACTIVE_SLIDE_ERROR,N as ACTIVE_SLIDE_LOADING,y as ACTIVE_SLIDE_PLAYING,L as CLASS_FLEX_CENTER,k as CLASS_FULLSIZE,M as CLASS_NO_SCROLL,I as CLASS_NO_SCROLL_PADDING,R as CLASS_SLIDE_WRAPPER,Carousel,ke as CarouselModule,de as CloseIcon,Controller,ye as ControllerContext,Se as ControllerModule,Y as ELEMENT_BUTTON,j as ELEMENT_ICON,z as EVENT_ON_KEY_DOWN,U as EVENT_ON_KEY_UP,B as EVENT_ON_POINTER_CANCEL,W as EVENT_ON_POINTER_DOWN,F as EVENT_ON_POINTER_LEAVE,A as EVENT_ON_POINTER_MOVE,O as EVENT_ON_POINTER_UP,H as EVENT_ON_WHEEL,he as ErrorIcon,ee as EventsContext,EventsProvider,q as IMAGE_FIT_CONTAIN,G as IMAGE_FIT_COVER,ue as IconButton,ImageSlide,Lightbox,Z as LightboxDefaultProps,ce as LightboxDispatchContext,ne as LightboxPropsContext,LightboxPropsProvider,re as LightboxStateContext,LightboxStateProvider,pe as LoadingIcon,n as MODULE_CAROUSEL,o as MODULE_CONTROLLER,r as MODULE_NAVIGATION,s as MODULE_NO_SCROLL,c as MODULE_PORTAL,i as MODULE_ROOT,l as MODULE_TOOLBAR,Navigation,NavigationButton,Le as NavigationModule,ve as NextIcon,NoScroll,Re as NoScrollModule,a as PLUGIN_CAPTIONS,u as PLUGIN_COUNTER,d as PLUGIN_DOWNLOAD,f as PLUGIN_FULLSCREEN,v as PLUGIN_INLINE,p as PLUGIN_SHARE,h as PLUGIN_SLIDESHOW,m as PLUGIN_THUMBNAILS,g as PLUGIN_ZOOM,Portal,Te as PortalModule,fe as PreviousIcon,Root,$e as RootModule,P as SLIDE_STATUS_COMPLETE,x as SLIDE_STATUS_ERROR,b as SLIDE_STATUS_LOADING,w as SLIDE_STATUS_PLACEHOLDER,E as SLIDE_STATUS_PLAYING,Ee as SwipeState,le as TimeoutsContext,TimeoutsProvider,Toolbar,De as ToolbarModule,J as UNKNOWN_ACTION_TYPE,K as VK_ARROW_LEFT,V as VK_ARROW_RIGHT,X as VK_ESCAPE,activeSlideStatus,addToolbarButton,calculatePreload,cleanup,clsx,composePrefix,computeSlideRect,createIcon,createIconDisabled,createModule,createNode,cssClass,cssVar,Lightbox as default,devicePixelRatio,getSlide,getSlideIfPresent,getSlideIndex,hasSlides,hasWindow,isImageFitCover,isImageSlide,label,makeComposePrefix,makeUseContext,parseInt,parseLengthPercentage,round,setRef,stopNavigationEventsPropagation,useAnimation,useContainerRect,Ce as useController,useDelay,useEventCallback,te as useEvents,useForkRef,useKeyboardNavigation,me as useLayoutEffect,ie as useLightboxDispatch,oe as useLightboxProps,se as useLightboxState,useLoseFocus,useMotionPreference,useNavigationState,usePointerEvents,usePointerSwipe,usePreventSwipeNavigation,useRTL,useSensors,useThrottle,ae as useTimeouts,useWheelSwipe,withPlugins};

